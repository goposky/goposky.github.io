
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Exploring OpenShift with Red Hat CDK 3.0</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../../../../favicon.ico">

    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">
    <link rel="stylesheet" type="text/css" href="../../../../assets/css/screen.css?v=0b2cea8a17">


    <link rel="canonical" href="http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/amp/">
    
    <meta property="og:site_name" content="Personal blog, tech chatter">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Exploring OpenShift with Red Hat CDK 3.0">
    <meta property="og:description" content="Red Hat’s OpenShift container platform is an industry leading PaaS for building and running cloud-native applications. OpenShift is an enterprise-grade platform with comprehensive features, but this blog will limit to looking at it from an introductory viewpoint for the developer or CI/CD engineer. For a quick head-start on">
    <meta property="og:url" content="http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/">
    <meta property="article:published_time" content="2017-06-27T20:00:51.000Z">
    <meta property="article:modified_time" content="2017-07-01T11:13:05.000Z">
    <meta property="article:tag" content="Openshift">
    <meta property="article:tag" content="PaaS">
    <meta property="article:tag" content="container">
    <meta property="article:tag" content="devops">
    <meta property="article:tag" content="RedHat">
    <meta property="article:tag" content="minishift">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Exploring OpenShift with Red Hat CDK 3.0">
    <meta name="twitter:description" content="Red Hat’s OpenShift container platform is an industry leading PaaS for building and running cloud-native applications. OpenShift is an enterprise-grade platform with comprehensive features, but this blog will limit to looking at it from an introductory viewpoint for the developer or CI/CD engineer. For a quick head-start on">
    <meta name="twitter:url" content="http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Gopal Ramachandran">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Openshift, PaaS, container, devops, RedHat, minishift">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Personal blog, tech chatter",
        "logo": "http://www.goposky.com/ghost/img/ghosticon.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "Gopal Ramachandran",
        "url": "http://www.goposky.com/author/gopal/",
        "sameAs": []
    },
    "headline": "Exploring OpenShift with Red Hat CDK 3.0",
    "url": "http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/",
    "datePublished": "2017-06-27T20:00:51.000Z",
    "dateModified": "2017-07-01T11:13:05.000Z",
    "keywords": "Openshift, PaaS, container, devops, RedHat, minishift",
    "description": "Red Hat’s OpenShift container platform is an industry leading PaaS for building and running cloud-native applications. OpenShift is an enterprise-grade platform with comprehensive features, but this blog will limit to looking at it from an introductory viewpoint for the developer or CI/CD engineer. For a quick head-start on",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://www.goposky.com"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="Personal blog, tech chatter" href="http://www.goposky.com/rss/">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64780937-1', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body class="post-template tag-openshift tag-paas tag-container tag-devops tag-redhat tag-minishift nav-closed">

    

    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
<center><a href="http://www.goposky.com">/home</a> <a href="http://www.twitter.com/goposky" target="_blank">/twitter</a> <a href="http://www.linkedin.com/in/goposky" target="_blank">/linkedin</a> <a href="http://www.github.com/goposky" target="_blank">/github</a> <a href="http://www.instagram.com/goposky" target="_blank">/instagram</a> <a href="mailto:mail@goposky.com" target="_blank">/email</a></center>
        
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-openshift tag-paas tag-container tag-devops tag-redhat tag-minishift">

        <header class="post-header">
            <h1 class="post-title">Exploring OpenShift with Red Hat CDK 3.0</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2017-06-27">27 June 2017</time>  on <a href="../../../../tag/openshift/">Openshift</a>, <a href="../../../../tag/paas/">PaaS</a>, <a href="../../../../tag/container/">container</a>, <a href="../../../../tag/devops/">devops</a>, <a href="../../../../tag/redhat/">RedHat</a>, <a href="../../../../tag/minishift/">minishift</a>
            </section>
        </header>

        <section class="post-content">
            <p>Red Hat’s OpenShift container platform is an industry leading PaaS for building and running cloud-native applications. OpenShift is an enterprise-grade platform with comprehensive features, but this blog will limit to looking at it from an introductory viewpoint for the developer or CI/CD engineer.</p>

<p>For a quick head-start on OpenShift fundamentals I recommend reading <a href="http://playbooks-rhtconsulting.rhcloud.com/playbooks/fundamentals/building_blocks_openshift.html">this website</a>. For more detail on architecture and components, the best place to go is the <a href="https://docs.openshift.com/container-platform/3.5/architecture/index.html">Red Hat official documentation</a>.</p>

<p>OpenShift is available in many flavours.</p>

<ul>
<li><em><a href="https://www.openshift.org">OpenShift Origin</a></em> - The upstream open-source version, built upon Kubernetes and other projects.</li>
<li><em><del>OpenShift Enterprise</del><sup id="fnref:1"><a href="index.html#fn:1" rel="footnote">1</a></sup> <a href="https://www.redhat.com/en/technologies/cloud-computing/openshift">Openshift Container Platform</a></em> - Red Hat’s flavour of Openshift platform for on-prem or cloud deployment with support.</li>
<li><em><a href="https://www.openshift.com/dedicated/index.html">OpenShift Dedicated</a></em> - Same as Openshift enterprise, but hosted as a cloud-based service by Red Hat.</li>
<li><em><a href="https://www.openshift.com">OpenShift Online</a></em> - A fully managed on-demand PaaS on cloud with limited memory and storage.</li>
<li><em><a href="https://developers.redhat.com/products/cdk/overview/">Red Hat CDK</a></em> - Container Development Kit, a stripped-down version to serve as a local environment for developers.</li>
<li><em><a href="https://openshift.io">openshift.io</a></em> (not GA as of writing) - A fully cloud-based development environment.</li>
</ul>

<p>Many indeed! But for this blog I choose the Red Hat CDK, the easiest way to get up and running. The CDK will provide a developer-ready single node OpenShift cluster. Typical use cases of the CDK environment would be to do local development, demos, or simply to familiarize with OpenShift.</p>

<p><strong>Installation and setup</strong></p>

<p>With the release of the new CDK version 3.0 the setup is extremely simple. It will spin up a Red Hat VM on the hypervisor of choice, and then create a single node Openshift cluster on this VM. I use macOS with virtualbox (default) for this setup.</p>

<ul>
<li>Join the <a href="https://developers.redhat.com/">Red Hat Developers program</a> and obtain a free Red Hat Developer subscription.</li>
<li>Download the installer from <a href="https://developers.redhat.com/products/devsuite/download/">Red Hat Development Suite</a>.</li>
<li>Run the installation and select Red Hat Container Development Kit components from the installer menu.</li>
</ul>

<p><em>For additional options or other OS/hypervisors refer to <a href="https://access.redhat.com/documentation/en/red-hat-container-development-kit/">Red Hat documentation</a>.</em></p>

<p>The CDK comes bundled with the <code>minishift</code> and <code>oc</code> binaries that you can use to interact with Openshift. To set up the CDK cluster,</p>

<ul>
<li>Set and export the variables <code>MINISHIFT_USERNAME</code> and <code>MINISHIFT_PASSWORD</code> with your subscription account.</li>
<li>Start minishift to create the minishift vm and provision a single-node Openshift cluster over it</li>
</ul>

<pre><code>$ minishift start
Starting local OpenShift cluster using 'virtualbox' hypervisor...  
Registering machine using subscription-manager  
... 
   OpenShift server started.
   The server is accessible via web console at:
       https://192.168.99.100:8443

   To login as administrator:
       oc login -u system:admin
</code></pre>

<ul>
<li>To set the <code>oc</code> binary to your path, run:
<code>eval $(minishift oc-env)</code></li>
</ul>

<p>You now have an Openshift cluster at your disposal complete with a master-cum-node host, built-in docker registry, router, internal etcd store, etc. You can check the versions you got:  </p>

<pre><code>$ oc version
oc v3.5.5.8  
kubernetes v1.5.2+43a9be4  
</code></pre>

<p><strong>Deploy an application</strong></p>

<ul>
<li>Login with the <em>developer</em> account: <code>oc login -u developer -p developer</code></li>
<li>Create a new project</li>
</ul>

<pre><code>$ oc new-project cdk-intro
Now using project "cdk-intro" on server "https://192.168.99.100:8443".  
</code></pre>

<p>The project is created and you are automatically "inside" that project's namespace.</p>

<ul>
<li>Now let's deploy an application to this project. We will deploy a sample nodejs app from github here at <a href="https://github.com/openshift/nodejs-ex">https://github.com/openshift/nodejs-ex</a>. We will use OpenShift's source-to-image (s2i) feature. This is the sequence events that will occur:
<ul><li>OpenShift pulls the source code from github and determines what type of application this is, ie, nodejs.</li>
<li>Choses a builder image that matches nodejs</li>
<li>Builds the application image and pushes it to an <em>imagestream</em>.</li>
<li>This will automatically trigger a <em>build</em> followed by a <em>deployment</em>. At the end of the deployment we will have the application deployed as a service available at an endpoint.</li></ul></li>
</ul>

<pre><code>$ oc new-app https://github.com/openshift/nodejs-ex -l name=my-app
--&gt; Found image 2e621c4 (12 days old) in image stream "openshift/nodejs" under tag "4" for "nodejs"

    Node.js 4 
    --------- 
    Platform for building and running Node.js 4 applications

    Tags: builder, nodejs, nodejs4

    * The source repository appears to match: nodejs
    * A source build using source code from https://github.com/openshift/nodejs-ex will be created
      * The resulting image will be pushed to image stream "nodejs-ex:latest"
      * Use 'start-build' to trigger a new build
    * This image will be deployed in deployment config "nodejs-ex"
    * Port 8080/tcp will be load balanced by service "nodejs-ex"
      * Other containers can access this service through the hostname "nodejs-ex"

--&gt; Creating resources with label name=my-app ...
    imagestream "nodejs-ex" created
    buildconfig "nodejs-ex" created
    deploymentconfig "nodejs-ex" created
    service "nodejs-ex" created
--&gt; Success
    Build scheduled, use 'oc logs -f bc/nodejs-ex' to track its progress.
    Run 'oc status' to view your app.
</code></pre>

<ul>
<li>We can view the status of the app as follows:</li>
</ul>

<pre><code>$ oc status
In project cdk-intro on server https://192.168.99.100:8443

svc/nodejs-ex - 172.30.35.237:8080  
  dc/nodejs-ex deploys istag/nodejs-ex:latest &lt;-
    bc/nodejs-ex source builds https://github.com/openshift/nodejs-ex on openshift/nodejs:4 
    deployment #1 deployed 4 minutes ago - 1 pod
</code></pre>

<ul>
<li>Let's expose the service and get a route to access it.</li>
</ul>

<pre><code>$ oc expose service nodejs-ex
route "nodejs-ex" exposed

$ oc get route
NAME        HOST/PORT                                   PATH      SERVICES    PORT       TERMINATION   WILDCARD  
nodejs-ex   nodejs-ex-cdk-intro.192.168.99.100.nip.io             nodejs-ex   8080-tcp                 None  
</code></pre>

<p>The application is now accessible at <em><a href="http://nodejs-ex-cdk-intro.192.168.99.100.nip.io">http://nodejs-ex-cdk-intro.192.168.99.100.nip.io</a></em>.</p>

<p>OpenShift integrates well with developer IDEs like Eclipse. Read <a href="http://www.sterburg.nl/2017/05/28/openshift-local-development-options/">Samuel Terburg's blog</a> for a complete list of local development options.</p>

<p><strong>Continuous delivery with OpenShift</strong></p>

<p>While OpenShift comes integrated with Jenkins, it is also possible to just use the built-in continuous delivery features of OpenShift itself. A <em>build</em> can be configured with triggers based on source code change, registry update, etc which will automatically trigger off a <em>deployment</em>.</p>

<p>OpenShift <em>projects</em> (based on kubernetes <em>namespaces</em>) are isolated, ie, objects residing in one namespace are oblivious to other namespaces unless configured otherwise. This allows us to create logical environments that are separate from each other in the form of namespaces. Thus you could have a project representing your <em>dev</em> environment, another project for <em>test</em>, <em>prod</em>, and so on.</p>

<p>Usually we do not want to let our <em>dev</em> and <em>prod</em> containers running on the same host. Typically we have more powerful and secure hosts for our <em>prod</em> environments than for <em>dev</em> or <em>test</em>. This separation can be done easily using <em>labels</em> and <em>selectors</em>. You label specific nodes as <em>env=dev</em>, <em>env=prod</em>, etc. Then, you can specify a <em>nodeSelector</em> for each of your project and specify the label corresponding to the environment. Once this is done, your <em>dev</em> project's pods will land on your <em>dev</em> hosts and <em>prod</em> pods on <em>prod</em> hosts.  <em>Labels</em> and <em>selectors</em> are simple yet powerful, so expect to make use of them a lot.</p>

<p>Organizations that are paranoid about environment isolation can deploy separate OpenShift clusters for each environment, and connect them to a common registry to do continuous delivery across environments. This combined with OpenShift's SDN (software Defined Network) provides robust isolation. Unfortunately you cannot explore a multi-node setup with the CDK environment. You can set that up using the opensource version, or the 30 day evaluation subscription of <a href="https://www.openshift.com/container-platform/trial.html">Openshift Enterprise</a>.</p>

<div class="footnotes"><ol><li class="footnote" id="fn:1"><p>Apparently rebranded to sound less enterprise-y and boring. <a href="index.html#fnref:1" title="return to article">↩</a></p></li></ol></div>
        </section>

        <footer class="post-footer">



            <section class="author">
                <h4><a href="../../../../author/gopal/">Gopal Ramachandran</a></h4>

                    <p>Read <a href="../../../../author/gopal/">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Exploring%20OpenShift%20with%20Red%20Hat%20CDK%203.0&amp;url=http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>




<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = 'http://www.goposky.com/2017/06/27/openshift-cdk3-test-drive/';  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = 'ghost-8'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://goposky.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




        <footer class="site-footer clearfix">
            <section class="copyright">Unless otherwise noted, content on this site is licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 License</a></section>
            <section class="poweredby">Built with <a href="https://ghost.org">Ghost</a> and hosted on <a href="https://github.com">Github</a>.</section>
        </footer>

    </footer></article></main></div>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    
    <script type="text/javascript" src="../../../../assets/js/jquery.fitvids.js?v=0b2cea8a17"></script>
    <script type="text/javascript" src="../../../../assets/js/index.js?v=0b2cea8a17"></script>

</body>
